const t=(t,i)=>{const s=document.createElement(t);return s.className=i,s},i=(t,i)=>{for(var s in i)t.setAttribute(s,i[s])},s=t=>JSON.parse(t),e=(s,e)=>{const h=t("iframe","");return i(h,{frameborder:"0",allowfullscreen:"true",allow:"accelerometer;autoplay;encrypted-media;gyroscope;picture-in-picture;",src:`${e}/embed/${s}?autoplay=1`}),h},h=()=>{const i=t("div","ytLazy__thumbnail"),s=t("div","ytLazy__img ytLazy__img--svg");return i.appendChild(s),i};class n{constructor(n,{background:o="rgba(0,0,0,0.9)",maxWidth:a=90,overflow:c=!1,createWatchIn:r=(()=>{})}){this.t=()=>{const t=document.querySelectorAll("."+this.i);for(let i=0;i<t.length;i++){const{id:e,openIn:n,title:o}=s(t[i].getAttribute("data-yt"));if(t[i].appendChild(this.s(e)),t[i].appendChild(h()),null!=o&&o){const s=`<div class="ytLazy__title">${o}</div><div class="ytLazy__gradient-top"></div>`;t[i].insertAdjacentHTML("beforeend",s)}n&&this.h&&this.h({link:this.o+"/watch?v="+e,template:s=>{t[i].insertAdjacentHTML("beforeend",s)}})}this.l()},this.s=t=>{const i=new Image;return i.className="ytLazy__image",i.loading="lazy",i.src=`//i.ytimg.com/vi/${t}/sddefault.jpg`,i},this.u=t=>{if(t.closest(".ytLazy__watch-in-link"))return;const h=t.closest(".ytLazy__item");if(null===h||h.className!==this.i)return;const{id:n,local:o,maxWidth:a}=s(h.getAttribute("data-yt"));if(o){const t=e(n,this.o);return i(t,{width:"100%",height:"100%"}),h.innerHTML="",void h.appendChild(t)}this.m({id:n,maxWidth:a})},this.g=()=>{const t=document.querySelector(".ytLazy-is-open");t&&(t.innerHTML="",t.classList.remove("ytLazy-is-open"),this.v&&document.body.classList.remove("ytLight-active"))},this.p=t=>{t.stopPropagation();const{target:i}=t;this.g(),this.u(i)},this.L=t=>{"Escape"===t.key&&(this.u(t.target),this.g())},this.l=()=>{window.addEventListener("click",this.p),window.addEventListener("keydown",this.L)},this.m=({id:s,maxWidth:h})=>{this.v&&document.body.classList.add("ytLight-active");const n=t("button","ytLight-close");i(n,{type:"button",title:"close movie"});const o=t("div","ytLight-wrap"),a=t("div","ytLight-container");(this._||h)&&i(a,{style:`max-width: ${h||this._}%`});const c=t("div","ytLight-iframe");c.appendChild(e(s,this.o)),a.appendChild(c),o.appendChild(a),c.insertAdjacentElement("afterend",n),this.k.appendChild(o),this.k.classList.add("ytLazy-is-open"),this.k.setAttribute("style",`background:${this.$};`)},this.i=n,this.$=o,this.v=c,this._=a,this.h=r,this.o="https://www.youtube.com",this.k=t("div","ytLight"),document.body.appendChild(this.k),this.t()}}export{n as default};
