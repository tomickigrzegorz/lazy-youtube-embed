const t=(t,i)=>{const s=document.createElement(t);return s.className=i,s},i=(t,i)=>{for(var s in i)t.setAttribute(s,i[s])},s=t=>JSON.parse(t),e=(s,e)=>{const h=t("iframe","");return i(h,{frameborder:"0",allowfullscreen:"true",allow:"accelerometer;autoplay;encrypted-media;gyroscope;picture-in-picture;",src:`${e}/embed/${s}?autoplay=1`}),h},h=()=>{const i=t("div","ytLazy__thumbnail"),s=t("div","ytLazy__img ytLazy__img--svg");return i.appendChild(s),i};class n{constructor(n,{background:a="rgba(0,0,0,0.9)",maxWidth:o=90,overflow:c=!1,picture:r=!1,createWatchIn:d=(()=>{})}){this.t=()=>{const t=document.querySelectorAll("."+this.i);for(let i=0;i<t.length;i++){const{id:e,openIn:n,title:a,picture:o}=s(t[i].getAttribute("data-yt"));if(t[i].appendChild(this.s(e,o)),t[i].appendChild(h()),null!=a&&a){const s=`<div class="ytLazy__title">${a}</div><div class="ytLazy__gradient-top"></div>`;t[i].insertAdjacentHTML("beforeend",s)}n&&this.h&&this.h({link:this.o+"/watch?v="+e,template:s=>{t[i].insertAdjacentHTML("beforeend",s)}})}this.u()},this.s=(t,i)=>{const s=[{media:"(min-width: 1440px)",srcset:this.l(t,"maxresdefault")},{media:"(min-width: 1024px)",srcset:this.l(t,"hqdefault")},{media:"(min-width: 480px)",srcset:this.l(t,"mqdefault")}],e=this.m("picture");s.map(t=>{e.appendChild(this.m("source",t))});const h=new Image;return h.className="ytLazy__image",h.loading="lazy",h.width=1050,h.height=787,h.src=this.l(t,"sddefault"),e.appendChild(h),this.p||i?e:h},this.l=(t,i)=>`//i.ytimg.com/vi/${t}/${i}.jpg`,this.m=(t,s)=>{const e=document.createElement(t);return s&&i(e,s),e},this.g=t=>{if(t.closest(".ytLazy__watch-in-link"))return;const h=t.closest(".ytLazy__item");if(null===h||h.className!==this.i)return;const{id:n,local:a,maxWidth:o}=s(h.getAttribute("data-yt"));if(a){const t=e(n,this.o);return i(t,{width:"100%",height:"100%"}),h.innerHTML="",void h.appendChild(t)}this.v({id:n,maxWidth:o})},this.L=()=>{const t=document.querySelector(".ytLazy-is-open");t&&(t.innerHTML="",t.classList.remove("ytLazy-is-open"),this._&&document.body.classList.remove("ytLight-active"))},this.$=t=>{t.stopPropagation();const{target:i}=t;this.L(),this.g(i)},this.k=t=>{"Escape"===t.key&&(this.g(t.target),this.L())},this.u=()=>{window.addEventListener("click",this.$),window.addEventListener("keydown",this.k)},this.v=({id:s,maxWidth:h})=>{this._&&document.body.classList.add("ytLight-active");const n=t("button","ytLight-close");i(n,{type:"button",title:"close movie"});const a=t("div","ytLight-wrap"),o=t("div","ytLight-container");(this.W||h)&&i(o,{style:`max-width: ${h||this.W}%`});const c=t("div","ytLight-iframe");c.appendChild(e(s,this.o)),o.appendChild(c),a.appendChild(o),c.insertAdjacentElement("afterend",n),this.I.appendChild(a),this.I.classList.add("ytLazy-is-open"),this.I.setAttribute("style",`background:${this.q};`)},this.i=n,this.q=a,this._=c,this.p=r,this.W=o,this.h=d,this.o="https://www.youtube.com",this.I=t("div","ytLight"),document.body.appendChild(this.I),this.t()}}export{n as default};
