!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ytLazy=e()}(this,(function(){"use strict";var t=function(t,e){var i=document.createElement(t);return i.className=e,i},e=function(t,e){for(var i in e)t.setAttribute(i,e[i])},i=function(t){return JSON.parse(t)},n=function(i,n){var a=t("iframe","");return e(a,{frameborder:"0",allowfullscreen:"true",allow:"accelerometer;autoplay;encrypted-media;gyroscope;picture-in-picture;",src:"".concat(n,"/embed/").concat(i,"?autoplay=1")}),a};return function(a,o){var c=this,r=o.background,d=void 0===r?"#000":r,s=o.opacity,l=void 0===s?80:s,h=o.maxWidth,u=void 0===h?90:h,v=o.overflow,y=void 0!==v&&v,p=o.createWatchIn,f=void 0===p?function(){}:p;this.initial=function(){for(var n=document.querySelectorAll(".".concat(c.class)),a=function(a){var o,r,d=i(n[a].getAttribute("data-yt")),s=d.id,l=d.openIn;e(n[a],{style:"background-image:url('//i.ytimg.com/vi/".concat(s,"/sddefault.jpg');")}),n[a].appendChild((o=t("div","ytLazy__thumbnail"),r=t("div","ytLazy__img ytLazy__img--svg"),o.appendChild(r),o)),l&&c.createWatchIn&&c.createWatchIn({link:c.link+"/watch?v="+s,template:function(t){n[a].insertAdjacentHTML("beforeend",t)}})},o=0;o<n.length;o++)a(o);c.handEvent()},this.hex2rgb=function(t,e){void 0===t&&(t="#000"),void 0===e&&(e=10);var i="string"==typeof t?parseInt(t.replace("#",""),16):t;return"rgba(".concat(i>>16,",").concat((65280&i)>>8,",").concat(255&i,",").concat(e/100,")")},this.setLbox=function(t){if(!t.closest(".ytLazy__watch-in-link")){var a=t.closest(".ytLazy__item");if(null!==a&&a.className===c.class){var o=i(a.getAttribute("data-yt")),r=o.id,d=o.local,s=o.maxWidth;if(d){var l=n(r,c.link);return e(l,{width:"100%",height:"100%"}),a.innerHTML="",void a.appendChild(l)}c.lightbox({id:r,maxWidth:s})}}},this.closeLbox=function(){var t=document.querySelector(".is-open");null!==t&&(t.innerHTML="",t.classList.remove("is-open"),c.overflow&&document.body.classList.remove("ytLight-active"))},this.handClick=function(t){t.stopPropagation();var e=t.target;c.closeLbox(),c.setLbox(e)},this.handKey=function(t){"Escape"===t.key&&(c.setLbox(t.target),c.closeLbox())},this.handEvent=function(){window.addEventListener("click",c.handClick),window.addEventListener("keydown",c.handKey)},this.lightbox=function(i){var a=i.id,o=i.maxWidth;c.overflow&&document.body.classList.add("ytLight-active");var r=t("button","ytLight-close");e(r,{type:"button",title:"close movie"});var d=t("div","ytLight-wrap"),s=t("div","ytLight-container");(c.maxWidth||o)&&e(s,{style:"max-width: ".concat(o||c.maxWidth,"%")});var l=t("div","ytLight-iframe");l.appendChild(n(a,c.link)),s.appendChild(l),d.appendChild(s),l.insertAdjacentElement("afterend",r);var h=c.overLayer;h.appendChild(d),h.classList.add("is-open"),h.setAttribute("style","background:".concat(c.hex2rgb(c.background,c.opacity)))},this.class=a,this.background=d,this.opacity=l,this.overflow=y,this.maxWidth=u,this.createWatchIn=f,this.link="https://www.youtube.com",this.overLayer=t("div","ytLight");var m=this.overLayer;document.body.appendChild(m),this.initial()}}));
