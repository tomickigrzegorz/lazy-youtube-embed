
(function(l, r) { if (l.getElementById('livereloadscript')) return; r = l.createElement('script'); r.async = 1; r.src = '//' + (window.location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1'; r.id = 'livereloadscript'; l.getElementsByTagName('head')[0].appendChild(r) })(window.document);
var ytLazy = (function () {
  'use strict';

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _defineProperty(obj, key, value) {
    if (key in obj) {
      Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      });
    } else {
      obj[key] = value;
    }

    return obj;
  }

  var ytLazy = function ytLazy(classElement, _ref) {
    var _this = this;

    var _ref$background = _ref.background,
        background = _ref$background === void 0 ? '#000' : _ref$background,
        _ref$opacity = _ref.opacity,
        _opacity = _ref$opacity === void 0 ? 90 : _ref$opacity;

    _classCallCheck(this, ytLazy);

    _defineProperty(this, "initial", function () {
      var getYTLazy = document.querySelectorAll(".".concat(_this.className));

      for (var i = 0; i < getYTLazy.length; i++) {
        var _this$parseJson = _this.parseJson(getYTLazy[i].getAttribute('data-yt')),
            id = _this$parseJson.id;

        getYTLazy[i].setAttribute('style', "background-image:url('//i.ytimg.com/vi/".concat(id, "/0.jpg');"));
        getYTLazy[i].appendChild(_this.createBtn());
      }
    });

    _defineProperty(this, "parseJson", function (object) {
      return JSON.parse(object);
    });

    _defineProperty(this, "hex2rgb", function (hex) {
      var opacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;
      var c = typeof hex === 'string' ? parseInt(hex.replace('#', ''), 16) : hex;
      return "rgba(".concat(c >> 16, ",").concat((c & 0xff00) >> 8, ",").concat(c & 0xff, ",").concat(opacity / 100, ")");
    });

    _defineProperty(this, "addClass", function (name) {
      var element = document.createElement('div');
      element.className = name;
      return element;
    });

    _defineProperty(this, "createBtn", function () {
      var buttonW = _this.addClass('ytLazy__thumbnail');

      var buttonS = _this.addClass('ytLazy__img ytLazy__img--svg');

      buttonW.appendChild(buttonS);
      return buttonW;
    });

    _defineProperty(this, "createIFrame", function (id) {
      var iframe = document.createElement('iframe');
      iframe.setAttribute('frameborder', '0');
      iframe.setAttribute('allowfullscreen', 'true');
      iframe.setAttribute('allow', 'accelerometer;autoplay;encrypted-media;gyroscope;picture-in-picture');
      iframe.src = "https://www.youtube.com/embed/".concat(id, "?autoplay=1");
      return iframe;
    });

    _defineProperty(this, "handleEvent", function () {
      [].slice.call(['click', 'keydown']).map(function (element) {
        document.addEventListener(element, function (event) {
          event.stopPropagation();
          var target = event.target;
          var element = target.closest('.ytLazy__item');

          if (target.className === 'ytLight-close' || target.className === 'ytLight-wrap' || event.keyCode === 27) {
            var isOpen = document.querySelector('.is-open');
            if (isOpen === null) return;
            isOpen.parentNode.removeChild(isOpen);
            document.body.classList.remove('ytLight-active');
          }

          if (element === null || element.className !== _this.className) return;

          var _this$parseJson2 = _this.parseJson(element.getAttribute('data-yt')),
              id = _this$parseJson2.id,
              local = _this$parseJson2.local;

          if (local) {
            var frame = _this.createIFrame(id);

            frame.setAttribute('width', '100%');
            frame.setAttribute('height', '100%');
            element.innerHTML = '';
            element.appendChild(frame);
            return;
          } else {
            _this.lightbox(id);
          }
        });
      });
    });

    _defineProperty(this, "lightbox", function (id) {
      document.body.classList.add('ytLight-active');
      var button = document.createElement('button');
      button.className = 'ytLight-close';
      button.setAttribute('type', 'button');
      button.setAttribute('title', 'close movie');

      var wrap = _this.addClass('ytLight-wrap');

      var container = _this.addClass('ytLight-container');

      var iframCointainer = _this.addClass('ytLight-iframe');

      iframCointainer.appendChild(_this.createIFrame(id));
      container.appendChild(iframCointainer);
      wrap.appendChild(container);
      iframCointainer.insertAdjacentElement('afterend', button);

      var lightboxDiv = _this.addClass('ytLight is-open');

      lightboxDiv.setAttribute('style', "background:".concat(_this.hex2rgb(_this.background, _this.opacity)));
      lightboxDiv.appendChild(wrap);
      document.body.appendChild(lightboxDiv);
    });

    this.className = classElement;
    this.background = background;
    this.opacity = _opacity;
    this.initial();
  };

  return ytLazy;

}());
