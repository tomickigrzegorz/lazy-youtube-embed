var ytLazy=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}return function(){function n(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,n),this.className=t,this.backgroundColor="undefined"===a.backgroundColor?a.backgroundColor:"#000000",this.opacity="undefined"===a.opacity?a.opacity:90,this.divElement=document.createElement("div"),this.button=document.createElement("button"),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("allowfullscreen",""),this.iframe.setAttribute("allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),this.initial()}var r,i,o;return r=n,(i=[{key:"initial",value:function(){this.getYTLazy=document.querySelectorAll(".".concat(this.className));for(var e=0;e<this.getYTLazy.length;e++){var t=this.parseJson(this.getYTLazy[e].getAttribute("data-yt")),a=t.type,n=t.id,r=t.local;this.type=a,this.id=n,this.local=r||!1,this.imgType=this.imageType(this.type),this.getYTLazy[e].setAttribute("style","background-image: url('//i.ytimg.com/vi/".concat(this.id,"/").concat(this.imgType,"'); background-repeat:no-repeat; background-size: cover; background-position: center;")),this.getYTLazy[e].appendChild(this.createButtonYoutube())}}},{key:"parseJson",value:function(e){return JSON.parse(e)}},{key:"imageType",value:function(e){var t="";switch(e){case 0:t="default.jpg";break;case 1:t="0.jpg";break;case 2:t="1.jpg";break;case 3:t="2.jpg";break;case 4:t="3.jpg";break;case 5:t="hqdefault.jpg";break;case 6:t="mqdefault.jpg"}return t}},{key:"convertHexToRgb",value:function(e,t){var n=a(e.match(/\w\w/g).map((function(e){return parseInt(e,16)})),3),r=n[0],i=n[1],o=n[2];return t?"rgba(".concat(r,",").concat(i,",").concat(o,",").concat(t/100,")"):"rgb(".concat(r,",").concat(i,",").concat(o,")")}},{key:"createButtonYoutube",value:function(){var e=this.divElement.cloneNode();e.className="ytLazy__thumbnail";var t=this.divElement.cloneNode();return t.classList.add("ytLazy__img"),t.classList.add("ytLazy__img--svg"),e.appendChild(t),e}},{key:"createFrame",value:function(e){var t=this.iframe.cloneNode();return t.src="https://www.youtube.com/embed/".concat(e,"?autoplay=1"),t}},{key:"handleEvent",value:function(){var e=this;document.body.addEventListener("click",(function(t){t.preventDefault();var a=t.target,n=a.closest(".ytLazy__item");if("ytLight-close"!==a.className&&"ytLight-wrap"!==a.className||(e.isOpen=document.querySelector(".is-open"),e.removeLightbox(e.isOpen)),null!==n&&n.className===e.className){var r=e.parseJson(n.getAttribute("data-yt")),i=r.id;if(r.local){var o=e.createFrame(i);return o.setAttribute("width","100%"),o.setAttribute("height","100%"),n.innerHTML="",void n.appendChild(o)}e.lightbox(i)}})),window.addEventListener("keydown",(function(t){if(t.stopPropagation(),27===t.keyCode){if(e.isOpen=document.querySelector(".is-open"),null===e.isOpen)return;e.removeLightbox(e.isOpen)}}))}},{key:"removeLightbox",value:function(e){e.parentNode.removeChild(e)}},{key:"lightbox",value:function(e){var t=this.button.cloneNode();t.className="ytLight-close",t.setAttribute("type","button"),t.setAttribute("title","close movie");var a=this.divElement.cloneNode();a.className="ytLight-wrap";var n=this.divElement.cloneNode();n.className="ytLight-container";var r=this.divElement.cloneNode();r.className="ytLight-iframe",r.appendChild(this.createFrame(e)),n.appendChild(r),a.appendChild(n),r.insertAdjacentElement("afterend",t);var i=this.divElement.cloneNode();i.classList.add("ytLight"),i.classList.add("is-open"),i.setAttribute("style","background: ".concat(this.convertHexToRgb(this.backgroundColor,this.opacity))),i.appendChild(a),document.body.appendChild(i)}}])&&t(r.prototype,i),o&&t(r,o),n}()}();
