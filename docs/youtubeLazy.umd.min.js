var t,e;t=this,e=function(){return function(t,e){var a=this,i=e.background,n=void 0===i?"#000":i,r=e.opacity,d=void 0===r?90:r,o=e.maxWidth,s=void 0===o?null:o;this.initial=function(){for(var t=document.querySelectorAll("."+a.className),e=0;e<t.length;e++){var i=a.parseJson(t[e].getAttribute("data-yt")).id;a.setAttr(t[e],{style:"background-image:url('//i.ytimg.com/vi/"+i+"/sddefault.jpg');"}),t[e].appendChild(a.crBtn())}a.handEvent()},this.parseJson=function(t){return JSON.parse(t)},this.hex2rgb=function(t,e){void 0===e&&(e=10);var a="string"==typeof t?parseInt(t.replace("#",""),16):t;return"rgba("+(a>>16)+","+((65280&a)>>8)+","+(255&a)+","+e/100+")"},this.addClass=function(t){var e=document.createElement("div");return e.className=t,e},this.crBtn=function(){var t=a.addClass("ytLazy__thumbnail"),e=a.addClass("ytLazy__img ytLazy__img--svg");return t.appendChild(e),t},this.setAttr=function(t,e){for(var a in e)t.setAttribute(a,e[a])},this.crIFrame=function(t){var e=document.createElement("iframe");return a.setAttr(e,{frameborder:"0",allowfullscreen:"true",allow:"accelerometer;autoplay;encrypted-media;gyroscope;picture-in-picture;",src:"https://www.youtube.com/embed/"+t+"?autoplay=1"}),e},this.setLbox=function(t){var e=t.closest(".ytLazy__item");if(null!==e&&e.className===a.className){var i=a.parseJson(e.getAttribute("data-yt")),n=i.id,r=i.local,d=i.maxWidth;if(r){var o=a.crIFrame(n);return a.setAttr(o,{width:"100%",height:"100%"}),e.innerHTML="",void e.appendChild(o)}a.lightbox({id:n,maxWidth:d})}},this.closeLbox=function(){var t,e=document.querySelector(".is-open");null!==e&&(null===(t=e.parentNode)||void 0===t||t.removeChild(e),document.body.classList.remove("ytLight-active"))},this.handClick=function(t){t.stopPropagation();var e=t.target;a.closeLbox(),a.setLbox(e)},this.handKey=function(t){"Escape"===t.key&&(a.setLbox(t.target),a.closeLbox())},this.handEvent=function(){window.addEventListener("click",a.handClick),window.addEventListener("keydown",a.handKey)},this.lightbox=function(t){var e=t.id,i=t.maxWidth;document.body.classList.add("ytLight-active");var n=document.createElement("button");n.className="ytLight-close",a.setAttr(n,{type:"button",title:"close movie"});var r=a.addClass("ytLight-wrap"),d=a.addClass("ytLight-container");(a.maxWidth||i)&&a.setAttr(d,{style:"max-width: "+(i||a.maxWidth)+"%"});var o=a.addClass("ytLight-iframe");o.appendChild(a.crIFrame(e)),d.appendChild(o),r.appendChild(d),o.insertAdjacentElement("afterend",n);var s=a.addClass("ytLight is-open");a.setAttr(s,{style:"background:"+a.hex2rgb(a.background,a.opacity)}),s.appendChild(r),document.body.appendChild(s)},this.className=t,this.background=n,this.opacity=d,this.maxWidth=s,this.initial()}},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ytLazy=e();
