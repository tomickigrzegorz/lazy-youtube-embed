var t,e;t=this,e=function(){return function(t,e){var i=this,a=e.background,n=void 0===a?"#000":a,r=e.opacity,s=void 0===r?80:r,d=e.maxWidth,o=void 0===d?90:d,l=e.overflow,c=void 0!==l&&l;this.initial=function(){for(var t=document.querySelectorAll("."+i.class),e=0;e<t.length;e++){var a=i.parseJson(t[e].getAttribute("data-yt")).id;i.setAttr(t[e],{style:"background-image:url('//i.ytimg.com/vi/"+a+"/sddefault.jpg');"}),t[e].appendChild(i.crBtn())}i.handEvent()},this.parseJson=function(t){return JSON.parse(t)},this.hex2rgb=function(t,e){void 0===t&&(t="#000"),void 0===e&&(e=10);var i="string"==typeof t?parseInt(t.replace("#",""),16):t;return"rgba("+(i>>16)+","+((65280&i)>>8)+","+(255&i)+","+e/100+")"},this.addClass=function(t,e){var i=document.createElement(t);return i.className=e,i},this.crBtn=function(){var t=i.addClass("div","ytLazy__thumbnail"),e=i.addClass("div","ytLazy__img ytLazy__img--svg");return t.appendChild(e),t},this.setAttr=function(t,e){for(var i in e)t.setAttribute(i,e[i])},this.crIFrame=function(t){var e=i.addClass("iframe","");return i.setAttr(e,{frameborder:"0",allowfullscreen:"true",allow:"accelerometer;autoplay;encrypted-media;gyroscope;picture-in-picture;",src:"https://www.youtube.com/embed/"+t+"?autoplay=1"}),e},this.setLbox=function(t){var e=t.closest(".ytLazy__item");if(null!==e&&e.className===i.class){var a=i.parseJson(e.getAttribute("data-yt")),n=a.id,r=a.local,s=a.maxWidth;if(r){var d=i.crIFrame(n);return i.setAttr(d,{width:"100%",height:"100%"}),e.innerHTML="",void e.appendChild(d)}i.lightbox({id:n,maxWidth:s})}},this.closeLbox=function(){var t=document.querySelector(".is-open");null!==t&&(t.innerHTML="",t.classList.remove("is-open"),i.overflow&&document.body.classList.remove("ytLight-active"))},this.handClick=function(t){t.stopPropagation();var e=t.target;i.closeLbox(),i.setLbox(e)},this.handKey=function(t){"Escape"===t.key&&(i.setLbox(t.target),i.closeLbox())},this.handEvent=function(){window.addEventListener("click",i.handClick),window.addEventListener("keydown",i.handKey)},this.lightbox=function(t){var e=t.id,a=t.maxWidth;i.overflow&&document.body.classList.add("ytLight-active");var n=i.addClass("button","ytLight-close");i.setAttr(n,{type:"button",title:"close movie"});var r=i.addClass("div","ytLight-wrap"),s=i.addClass("div","ytLight-container");(i.maxWidth||a)&&i.setAttr(s,{style:"max-width: "+(a||i.maxWidth)+"%"});var d=i.addClass("div","ytLight-iframe");d.appendChild(i.crIFrame(e)),s.appendChild(d),r.appendChild(s),d.insertAdjacentElement("afterend",n);var o=i.overLayer;o.appendChild(r),o.classList.add("is-open"),o.setAttribute("style","background:"+i.hex2rgb(i.background,i.opacity))},this.class=t,this.background=n,this.opacity=s,this.overflow=c,this.maxWidth=o,this.overLayer=this.addClass("div","ytLight");var h=this.overLayer;document.body.appendChild(h),this.initial()}},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ytLazy=e();
