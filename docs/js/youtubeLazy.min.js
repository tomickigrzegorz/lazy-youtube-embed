var ytLazy=function(){"use strict";const t=(t,i)=>{const s=document.createElement(t);return s.className=i,s},i=(t,i)=>{for(var s in i)t.setAttribute(s,i[s])},s=t=>JSON.parse(t),e=(s,e)=>{const n=t("iframe","");return i(n,{frameborder:"0",allowfullscreen:"true",allow:"accelerometer;autoplay;encrypted-media;gyroscope;picture-in-picture;",src:`${e}/embed/${s}?autoplay=1`}),n},n=()=>{const i=t("div","ytLazy__thumbnail"),s=t("div","ytLazy__img ytLazy__img--svg");return i.appendChild(s),i};return class{constructor(h,{background:o="rgba(0,0,0,0.9)",maxWidth:a=90,overflow:c=!1,createWatchIn:r=(()=>{})}){this.t=()=>{const t=document.querySelectorAll("."+this.i);for(let i=0;i<t.length;i++){const{id:e,openIn:h,title:o}=s(t[i].getAttribute("data-yt"));if(t[i].appendChild(this.s(e)),t[i].appendChild(n()),null!=o&&o){const s=`<div class="ytLazy__title">${o}</div><div class="ytLazy__gradient-top"></div>`;t[i].insertAdjacentHTML("beforeend",s)}h&&this.h&&this.h({link:this.o+"/watch?v="+e,template:s=>{t[i].insertAdjacentHTML("beforeend",s)}})}this.l()},this.s=t=>{const i=new Image;return i.className="ytLazy__image",i.loading="lazy",i.src=`//i.ytimg.com/vi/${t}/sddefault.jpg`,i},this.u=t=>{if(t.closest(".ytLazy__watch-in-link"))return;const n=t.closest(".ytLazy__item");if(null===n||n.className!==this.i)return;const{id:h,local:o,maxWidth:a}=s(n.getAttribute("data-yt"));if(o){const t=e(h,this.o);return i(t,{width:"100%",height:"100%"}),n.innerHTML="",void n.appendChild(t)}this.m({id:h,maxWidth:a})},this.g=()=>{const t=document.querySelector(".ytLazy-is-open");t&&(t.innerHTML="",t.classList.remove("ytLazy-is-open"),this.v&&document.body.classList.remove("ytLight-active"))},this.L=t=>{t.stopPropagation();const{target:i}=t;this.g(),this.u(i)},this.p=t=>{"Escape"===t.key&&(this.u(t.target),this.g())},this.l=()=>{window.addEventListener("click",this.L),window.addEventListener("keydown",this.p)},this.m=({id:s,maxWidth:n})=>{this.v&&document.body.classList.add("ytLight-active");const h=t("button","ytLight-close");i(h,{type:"button",title:"close movie"});const o=t("div","ytLight-wrap"),a=t("div","ytLight-container");(this._||n)&&i(a,{style:`max-width: ${n||this._}%`});const c=t("div","ytLight-iframe");c.appendChild(e(s,this.o)),a.appendChild(c),o.appendChild(a),c.insertAdjacentElement("afterend",h),this.k.appendChild(o),this.k.classList.add("ytLazy-is-open"),this.k.setAttribute("style",`background:${this.$};`)},this.i=h,this.$=o,this.v=c,this._=a,this.h=r,this.o="https://www.youtube.com",this.k=t("div","ytLight"),document.body.appendChild(this.k),this.t()}}}();
//# sourceMappingURL=youtubeLazy.min.js.map
